import ze from"readable-stream/transform";var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ve(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function $e(o){if(o.__esModule)return o;var t=o.default;if(typeof t=="function"){var r=function i(){if(this instanceof i){var s=[null];s.push.apply(s,arguments);var c=Function.bind.apply(t,s);return new c}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(o).forEach(function(i){var s=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return o[i]}})}),r}var Ie={};(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;function t(E){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(E)}function r(E,p){var e=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!e){if(Array.isArray(E)||(e=c(E))||p&&E&&typeof E.length=="number"){e&&(E=e);var n=0,a=function(){};return{s:a,n:function(){return n>=E.length?{done:!0}:{done:!1,value:E[n++]}},e:function(v){throw v},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,f=!1,w;return{s:function(){e=e.call(E)},n:function(){var v=e.next();return l=v.done,v},e:function(v){f=!0,w=v},f:function(){try{!l&&e.return!=null&&e.return()}finally{if(f)throw w}}}}function i(E){return h(E)||d(E)||c(E)||s()}function s(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(E,p){if(E){if(typeof E=="string")return y(E,p);var e=Object.prototype.toString.call(E).slice(8,-1);if(e==="Object"&&E.constructor&&(e=E.constructor.name),e==="Map"||e==="Set")return Array.from(E);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return y(E,p)}}function d(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}function h(E){if(Array.isArray(E))return y(E)}function y(E,p){(p==null||p>E.length)&&(p=E.length);for(var e=0,n=new Array(p);e<p;e++)n[e]=E[e];return n}function u(E,p){if(!(E instanceof p))throw new TypeError("Cannot call a class as a function")}function S(E,p){for(var e=0;e<p.length;e++){var n=p[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(E,n.key,n)}}function N(E,p,e){return p&&S(E.prototype,p),e&&S(E,e),Object.defineProperty(E,"prototype",{writable:!1}),E}function O(E,p,e){return p in E?Object.defineProperty(E,p,{value:e,enumerable:!0,configurable:!0,writable:!0}):E[p]=e,E}var I=function(){function E(p,e){var n=this;if(u(this,E),O(this,"defaultOptions",{sourceAttr:"href",overlay:!0,overlayOpacity:.7,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",captionHTML:!0,close:!0,closeText:"&times;",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif|webp",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:"has-lightbox",rtl:!1,fixedClass:"sl-fixed",fadeSpeed:300,uniqueImages:!0,focus:!0,scrollZoom:!0,scrollZoomFactor:.5,download:!1}),O(this,"transitionPrefix",void 0),O(this,"isPassiveEventsSupported",void 0),O(this,"transitionCapable",!1),O(this,"isTouchDevice","ontouchstart"in window),O(this,"isAppleDevice",/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),O(this,"initialLocationHash",void 0),O(this,"pushStateSupport","pushState"in history),O(this,"isOpen",!1),O(this,"isAnimating",!1),O(this,"isClosing",!1),O(this,"isFadeIn",!1),O(this,"urlChangedOnce",!1),O(this,"hashReseted",!1),O(this,"historyHasChanges",!1),O(this,"historyUpdateTimeout",null),O(this,"currentImage",void 0),O(this,"eventNamespace","simplelightbox"),O(this,"domNodes",{}),O(this,"loadedImages",[]),O(this,"initialImageIndex",0),O(this,"currentImageIndex",0),O(this,"initialSelector",null),O(this,"globalScrollbarWidth",0),O(this,"controlCoordinates",{swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:!1,imageLeft:0,zoomed:!1,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:!1,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:!1,touchmoveCount:0}),this.options=Object.assign(this.defaultOptions,e),this.isPassiveEventsSupported=this.checkPassiveEventsSupport(),typeof p=="string"?(this.initialSelector=p,this.elements=Array.from(document.querySelectorAll(p))):this.elements=typeof p.length<"u"&&p.length>0?Array.from(p):[p],this.relatedElements=[],this.transitionPrefix=this.calculateTransitionPrefix(),this.transitionCapable=this.transitionPrefix!==!1,this.initialLocationHash=this.hash,this.options.rel&&(this.elements=this.getRelated(this.options.rel)),this.options.uniqueImages){var a=[];this.elements=Array.from(this.elements).filter(function(l){var f=l.getAttribute(n.options.sourceAttr);return a.indexOf(f)===-1?(a.push(f),!0):!1})}this.createDomNodes(),this.options.close&&this.domNodes.wrapper.appendChild(this.domNodes.closeButton),this.options.nav&&this.domNodes.wrapper.appendChild(this.domNodes.navigation),this.options.spinner&&this.domNodes.wrapper.appendChild(this.domNodes.spinner),this.addEventListener(this.elements,"click."+this.eventNamespace,function(l){if(n.isValidLink(l.currentTarget)){if(l.preventDefault(),n.isAnimating)return!1;n.initialImageIndex=n.elements.indexOf(l.currentTarget),n.openImage(l.currentTarget)}}),this.options.docClose&&this.addEventListener(this.domNodes.wrapper,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],function(l){n.isOpen&&l.target===l.currentTarget&&n.close()}),this.options.disableRightClick&&this.addEventListener(document.body,"contextmenu."+this.eventNamespace,function(l){l.target.parentElement.classList.contains("sl-image")&&l.preventDefault()}),this.options.enableKeyboard&&this.addEventListener(document.body,"keyup."+this.eventNamespace,this.throttle(function(l){if(n.controlCoordinates.swipeDiff=0,n.isAnimating&&l.key==="Escape"){n.currentImage.setAttribute("src",""),n.isAnimating=!1,n.close();return}n.isOpen&&(l.preventDefault(),l.key==="Escape"&&n.close(),!n.isAnimating&&["ArrowLeft","ArrowRight"].indexOf(l.key)>-1&&n.loadImage(l.key==="ArrowRight"?1:-1))},this.options.throttleInterval)),this.addEvents()}return N(E,[{key:"checkPassiveEventsSupport",value:function(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}catch{}return e}},{key:"getCaptionElement",value:function(e){if(this.options.captionSelector.startsWith("+")){var n=this.options.captionSelector.replace(/^\+/,"").trimStart(),a=e.nextElementSibling;return a&&a.matches(n)?a:!1}else if(this.options.captionSelector.startsWith(">")){var l=this.options.captionSelector.replace(/^>/,"").trimStart();return e.querySelector(l)}else return e.querySelector(this.options.captionSelector)}},{key:"generateQuerySelector",value:function(e){var n=e.tagName,a=e.id,l=e.className,f=e.parentNode;if(n==="HTML")return"HTML";var w=n;if(w+=a!==""?"#".concat(a):"",l)for(var b=l.trim().split(/\s/),v=0;v<b.length;v++)w+=".".concat(b[v]);for(var L=1,M=e;M.previousElementSibling;M=M.previousElementSibling)L+=1;return w+=":nth-child(".concat(L,")"),"".concat(this.generateQuerySelector(f)," > ").concat(w)}},{key:"createDomNodes",value:function(){if(this.domNodes.overlay=document.createElement("div"),this.domNodes.overlay.classList.add("sl-overlay"),this.domNodes.overlay.dataset.opacityTarget=this.options.overlayOpacity,this.domNodes.closeButton=document.createElement("button"),this.domNodes.closeButton.classList.add("sl-close"),this.domNodes.closeButton.innerHTML=this.options.closeText,this.domNodes.spinner=document.createElement("div"),this.domNodes.spinner.classList.add("sl-spinner"),this.domNodes.spinner.innerHTML="<div></div>",this.domNodes.navigation=document.createElement("div"),this.domNodes.navigation.classList.add("sl-navigation"),this.domNodes.navigation.innerHTML='<button class="sl-prev">'.concat(this.options.navText[0],'</button><button class="sl-next">').concat(this.options.navText[1],"</button>"),this.domNodes.counter=document.createElement("div"),this.domNodes.counter.classList.add("sl-counter"),this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>',this.domNodes.download=document.createElement("div"),this.domNodes.download.classList.add("sl-download"),this.domNodes.downloadLink=document.createElement("a"),this.domNodes.downloadLink.setAttribute("download",""),this.domNodes.downloadLink.textContent=this.options.download,this.domNodes.download.appendChild(this.domNodes.downloadLink),this.domNodes.caption=document.createElement("div"),this.domNodes.caption.classList.add("sl-caption","pos-"+this.options.captionPosition),this.options.captionClass){var e,n=this.options.captionClass.split(/[\s,]+/);(e=this.domNodes.caption.classList).add.apply(e,i(n))}this.domNodes.image=document.createElement("div"),this.domNodes.image.classList.add("sl-image"),this.domNodes.wrapper=document.createElement("div"),this.domNodes.wrapper.classList.add("sl-wrapper"),this.domNodes.wrapper.setAttribute("tabindex",-1),this.domNodes.wrapper.setAttribute("role","dialog"),this.domNodes.wrapper.setAttribute("aria-hidden",!1),this.options.className&&this.domNodes.wrapper.classList.add(this.options.className),this.options.rtl&&this.domNodes.wrapper.classList.add("sl-dir-rtl")}},{key:"throttle",value:function(e,n){var a;return function(){a||(e.apply(this,arguments),a=!0,setTimeout(function(){return a=!1},n))}}},{key:"isValidLink",value:function(e){return!this.options.fileExt||e.getAttribute(this.options.sourceAttr)&&new RegExp("("+this.options.fileExt+")($|\\?.*$)","i").test(e.getAttribute(this.options.sourceAttr))}},{key:"calculateTransitionPrefix",value:function(){var e=(document.body||document.documentElement).style;return"transition"in e?"":"WebkitTransition"in e?"-webkit-":"MozTransition"in e?"-moz-":"OTransition"in e?"-o":!1}},{key:"getScrollbarWidth",value:function(){var e=0,n=document.createElement("div");return n.classList.add("sl-scrollbar-measure"),document.body.appendChild(n),e=n.offsetWidth-n.clientWidth,document.body.removeChild(n),e}},{key:"toggleScrollbar",value:function(e){var n=0,a=[].slice.call(document.querySelectorAll("."+this.options.fixedClass));if(e==="hide"){var l=window.innerWidth;if(!l){var f=document.documentElement.getBoundingClientRect();l=f.right-Math.abs(f.left)}if(document.body.clientWidth<l||this.isAppleDevice){var w=parseInt(window.getComputedStyle(document.body).paddingRight||0,10);n=this.getScrollbarWidth(),document.body.dataset.originalPaddingRight=w,(n>0||n==0&&this.isAppleDevice)&&(document.body.classList.add("hidden-scroll"),document.body.style.paddingRight=w+n+"px",a.forEach(function(b){var v=b.style.paddingRight,L=window.getComputedStyle(b)["padding-right"];b.dataset.originalPaddingRight=v,b.style.paddingRight="".concat(parseFloat(L)+n,"px")}))}}else document.body.classList.remove("hidden-scroll"),document.body.style.paddingRight=document.body.dataset.originalPaddingRight+"px",a.forEach(function(b){var v=b.dataset.originalPaddingRight;typeof v<"u"&&(b.style.paddingRight=v)});return n}},{key:"close",value:function(){var e=this;if(!this.isOpen||this.isAnimating||this.isClosing)return!1;this.isClosing=!0;var n=this.relatedElements[this.currentImageIndex];n.dispatchEvent(new Event("close.simplelightbox")),this.options.history&&(this.historyHasChanges=!1,this.hashReseted||this.resetHash()),this.removeEventListener(document,"focusin."+this.eventNamespace),this.fadeOut(this.domNodes.overlay,this.options.fadeSpeed),this.fadeOut(document.querySelectorAll(".sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter"),this.options.fadeSpeed,function(){e.options.disableScroll&&e.toggleScrollbar("show"),e.options.htmlClass&&e.options.htmlClass!==""&&document.querySelector("html").classList.remove(e.options.htmlClass),document.body.removeChild(e.domNodes.wrapper),e.options.overlay&&document.body.removeChild(e.domNodes.overlay),e.domNodes.additionalHtml=null,e.domNodes.download=null,n.dispatchEvent(new Event("closed.simplelightbox")),e.isClosing=!1}),this.currentImage=null,this.isOpen=!1,this.isAnimating=!1;for(var a in this.controlCoordinates)this.controlCoordinates[a]=0;this.controlCoordinates.mousedown=!1,this.controlCoordinates.zoomed=!1,this.controlCoordinates.capture=!1,this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom),this.controlCoordinates.doubleTapped=!1}},{key:"hash",get:function(){return window.location.hash.substring(1)}},{key:"preload",value:function(){var e=this,n=this.currentImageIndex,a=this.relatedElements.length,l=n+1<0?a-1:n+1>=a-1?0:n+1,f=n-1<0?a-1:n-1>=a-1?0:n-1,w=new Image,b=new Image;w.addEventListener("load",function(v){var L=v.target.getAttribute("src");e.loadedImages.indexOf(L)===-1&&e.loadedImages.push(L),e.relatedElements[n].dispatchEvent(new Event("nextImageLoaded."+e.eventNamespace))}),w.setAttribute("src",this.relatedElements[l].getAttribute(this.options.sourceAttr)),b.addEventListener("load",function(v){var L=v.target.getAttribute("src");e.loadedImages.indexOf(L)===-1&&e.loadedImages.push(L),e.relatedElements[n].dispatchEvent(new Event("prevImageLoaded."+e.eventNamespace))}),b.setAttribute("src",this.relatedElements[f].getAttribute(this.options.sourceAttr))}},{key:"loadImage",value:function(e){var n=this,a=e;this.options.rtl&&(e=-e),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("change."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((e===1?"next":"prev")+"."+this.eventNamespace));var l=this.currentImageIndex+e;if(this.isAnimating||(l<0||l>=this.relatedElements.length)&&this.options.loop===!1)return!1;this.currentImageIndex=l<0?this.relatedElements.length-1:l>this.relatedElements.length-1?0:l,this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,-100*a-this.controlCoordinates.swipeDiff+"px"),this.fadeOut(this.domNodes.image,this.options.fadeSpeed,function(){n.isAnimating=!0,n.isClosing?n.isAnimating=!1:setTimeout(function(){var f=n.relatedElements[n.currentImageIndex];n.currentImage&&(n.currentImage.setAttribute("src",f.getAttribute(n.options.sourceAttr)),n.loadedImages.indexOf(f.getAttribute(n.options.sourceAttr))===-1&&n.show(n.domNodes.spinner),n.domNodes.image.contains(n.domNodes.caption)&&n.domNodes.image.removeChild(n.domNodes.caption),n.adjustImage(a),n.options.preloading&&n.preload())},100)})}},{key:"adjustImage",value:function(e){var n=this;if(!this.currentImage)return!1;var a=new Image,l=window.innerWidth*this.options.widthRatio,f=window.innerHeight*this.options.heightRatio;a.setAttribute("src",this.currentImage.getAttribute("src")),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.zoomPanElement(0,0,1),a.addEventListener("error",function(w){n.relatedElements[n.currentImageIndex].dispatchEvent(new Event("error."+n.eventNamespace)),n.isAnimating=!1,n.isOpen=!0,n.domNodes.spinner.style.display="none";var b=e===1||e===-1;if(n.initialImageIndex===n.currentImageIndex&&b)return n.close();n.options.alertError&&alert(n.options.alertErrorMessage),n.loadImage(b?e:1)}),a.addEventListener("load",function(w){typeof e<"u"&&(n.relatedElements[n.currentImageIndex].dispatchEvent(new Event("changed."+n.eventNamespace)),n.relatedElements[n.currentImageIndex].dispatchEvent(new Event((e===1?"nextDone":"prevDone")+"."+n.eventNamespace))),n.options.history&&n.updateURL(),n.loadedImages.indexOf(n.currentImage.getAttribute("src"))===-1&&n.loadedImages.push(n.currentImage.getAttribute("src"));var b=w.target.width,v=w.target.height;if(n.options.scaleImageToRatio||b>l||v>f){var L=b/v>l/f?b/l:v/f;b/=L,v/=L}n.domNodes.image.style.top=(window.innerHeight-v)/2+"px",n.domNodes.image.style.left=(window.innerWidth-b-n.globalScrollbarWidth)/2+"px",n.domNodes.image.style.width=b+"px",n.domNodes.image.style.height=v+"px",n.domNodes.spinner.style.display="none",n.options.focus&&n.forceFocus(),n.fadeIn(n.currentImage,n.options.fadeSpeed,function(){n.options.focus&&n.domNodes.wrapper.focus()}),n.isOpen=!0;var M,x;typeof n.options.captionSelector=="string"?M=n.options.captionSelector==="self"?n.relatedElements[n.currentImageIndex]:n.getCaptionElement(n.relatedElements[n.currentImageIndex]):typeof n.options.captionSelector=="function"&&(M=n.options.captionSelector(n.relatedElements[n.currentImageIndex])),n.options.captions&&M&&(n.options.captionType==="data"?x=M.dataset[n.options.captionsData]:n.options.captionType==="text"?x=M.innerHTML:x=M.getAttribute(n.options.captionsData)),n.options.loop?n.relatedElements.length===1?n.hide(n.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):n.show(n.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):(n.currentImageIndex===0&&n.hide(n.domNodes.navigation.querySelector(".sl-prev")),n.currentImageIndex>=n.relatedElements.length-1&&n.hide(n.domNodes.navigation.querySelector(".sl-next")),n.currentImageIndex>0&&n.show(n.domNodes.navigation.querySelector(".sl-prev")),n.currentImageIndex<n.relatedElements.length-1&&n.show(n.domNodes.navigation.querySelector(".sl-next"))),e===1||e===-1?(n.options.animationSlide&&(n.slide(0,100*e+"px"),setTimeout(function(){n.slide(n.options.animationSpeed/1e3,0+"px")},50)),n.fadeIn(n.domNodes.image,n.options.fadeSpeed,function(){n.isAnimating=!1,n.setCaption(x,b)})):(n.isAnimating=!1,n.setCaption(x,b)),n.options.additionalHtml&&!n.domNodes.additionalHtml&&(n.domNodes.additionalHtml=document.createElement("div"),n.domNodes.additionalHtml.classList.add("sl-additional-html"),n.domNodes.additionalHtml.innerHTML=n.options.additionalHtml,n.domNodes.image.appendChild(n.domNodes.additionalHtml)),n.options.download&&n.domNodes.downloadLink.setAttribute("href",n.currentImage.getAttribute("src"))})}},{key:"zoomPanElement",value:function(e,n,a){this.currentImage.style[this.transitionPrefix+"transform"]="translate("+e+","+n+") scale("+a+")"}},{key:"minMax",value:function(e,n,a){return e<n?n:e>a?a:e}},{key:"setZoomData",value:function(e,n,a){this.currentImage.dataset.scale=e,this.currentImage.dataset.translateX=n,this.currentImage.dataset.translateY=a}},{key:"hashchangeHandler",value:function(){this.isOpen&&this.hash===this.initialLocationHash&&(this.hashReseted=!0,this.close())}},{key:"addEvents",value:function(){var e=this;if(this.addEventListener(window,"resize."+this.eventNamespace,function(a){e.isOpen&&e.adjustImage()}),this.addEventListener(this.domNodes.closeButton,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],this.close.bind(this)),this.options.history&&setTimeout(function(){e.addEventListener(window,"hashchange."+e.eventNamespace,function(a){e.isOpen&&e.hashchangeHandler()})},40),this.addEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace,function(a){if(!a.currentTarget.tagName.match(/button/i))return!0;a.preventDefault(),e.controlCoordinates.swipeDiff=0,e.loadImage(a.currentTarget.classList.contains("sl-next")?1:-1)}),this.options.scrollZoom){var n=1;this.addEventListener(this.domNodes.image,["mousewheel","DOMMouseScroll"],function(a){if(e.controlCoordinates.mousedown||e.isAnimating||e.isClosing||!e.isOpen)return!0;e.controlCoordinates.containerHeight==0&&(e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY));var l=a.delta||a.wheelDelta;l===void 0&&(l=a.detail),l=Math.max(-1,Math.min(1,l)),n+=l*e.options.scrollZoomFactor*n,n=Math.max(1,Math.min(e.options.maxZoom,n)),e.controlCoordinates.targetScale=n;var f=document.documentElement.scrollTop||document.body.scrollTop;e.controlCoordinates.pinchOffsetX=a.pageX,e.controlCoordinates.pinchOffsetY=a.pageY-f||0,e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.scaleDifference=e.controlCoordinates.targetScale-e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.initialOffsetX-(e.controlCoordinates.pinchOffsetX-e.controlCoordinates.containerOffsetX-e.controlCoordinates.containerWidth/2-e.controlCoordinates.initialOffsetX)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,e.controlCoordinates.limitOffsetX*-1,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.initialOffsetY-(e.controlCoordinates.pinchOffsetY-e.controlCoordinates.containerOffsetY-e.controlCoordinates.containerHeight/2-e.controlCoordinates.initialOffsetY)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,e.controlCoordinates.limitOffsetY*-1,e.controlCoordinates.limitOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale),e.controlCoordinates.targetScale>1?(e.controlCoordinates.zoomed=!0,(!e.domNodes.caption.style.opacity||e.domNodes.caption.style.opacity>0)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed)):(e.controlCoordinates.initialScale===1&&(e.controlCoordinates.zoomed=!1,e.domNodes.caption.style.display==="none"&&e.fadeIn(e.domNodes.caption,e.options.fadeSpeed)),e.controlCoordinates.initialPinchDistance=null,e.controlCoordinates.capture=!1),e.controlCoordinates.initialPinchDistance=e.controlCoordinates.targetPinchDistance,e.controlCoordinates.initialScale=e.controlCoordinates.targetScale,e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY,e.setZoomData(e.controlCoordinates.targetScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale)})}this.addEventListener(this.domNodes.image,["touchstart."+this.eventNamespace,"mousedown."+this.eventNamespace],function(a){if(a.target.tagName==="A"&&a.type==="touchstart")return!0;if(a.type==="mousedown")a.preventDefault(),e.controlCoordinates.initialPointerOffsetX=a.clientX,e.controlCoordinates.initialPointerOffsetY=a.clientY,e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY),e.controlCoordinates.capture=!0;else{if(e.controlCoordinates.touchCount=a.touches.length,e.controlCoordinates.initialPointerOffsetX=a.touches[0].clientX,e.controlCoordinates.initialPointerOffsetY=a.touches[0].clientY,e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.controlCoordinates.touchCount===1){if(!e.controlCoordinates.doubleTapped)e.controlCoordinates.doubleTapped=!0,setTimeout(function(){e.controlCoordinates.doubleTapped=!1},300);else return e.currentImage.classList.add("sl-transition"),e.controlCoordinates.zoomed?(e.controlCoordinates.initialScale=1,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement(0+"px",0+"px",e.controlCoordinates.initialScale),e.controlCoordinates.zoomed=!1):(e.controlCoordinates.initialScale=e.options.doubleTapZoom,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement(0+"px",0+"px",e.controlCoordinates.initialScale),(!e.domNodes.caption.style.opacity||e.domNodes.caption.style.opacity>0)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed),e.controlCoordinates.zoomed=!0),setTimeout(function(){e.currentImage&&e.currentImage.classList.remove("sl-transition")},200),!1;e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY)}else e.controlCoordinates.touchCount===2&&(e.controlCoordinates.initialPointerOffsetX2=a.touches[1].clientX,e.controlCoordinates.initialPointerOffsetY2=a.touches[1].clientY,e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY),e.controlCoordinates.pinchOffsetX=(e.controlCoordinates.initialPointerOffsetX+e.controlCoordinates.initialPointerOffsetX2)/2,e.controlCoordinates.pinchOffsetY=(e.controlCoordinates.initialPointerOffsetY+e.controlCoordinates.initialPointerOffsetY2)/2,e.controlCoordinates.initialPinchDistance=Math.sqrt((e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialPointerOffsetX2)*(e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialPointerOffsetX2)+(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialPointerOffsetY2)*(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialPointerOffsetY2)));e.controlCoordinates.capture=!0}return e.controlCoordinates.mousedown?!0:(e.transitionCapable&&(e.controlCoordinates.imageLeft=parseInt(e.domNodes.image.style.left,10)),e.controlCoordinates.mousedown=!0,e.controlCoordinates.swipeDiff=0,e.controlCoordinates.swipeYDiff=0,e.controlCoordinates.swipeStart=a.pageX||a.touches[0].pageX,e.controlCoordinates.swipeYStart=a.pageY||a.touches[0].pageY,!1)}),this.addEventListener(this.domNodes.image,["touchmove."+this.eventNamespace,"mousemove."+this.eventNamespace,"MSPointerMove"],function(a){if(!e.controlCoordinates.mousedown)return!0;if(a.type==="touchmove"){if(e.controlCoordinates.capture===!1)return!1;e.controlCoordinates.pointerOffsetX=a.touches[0].clientX,e.controlCoordinates.pointerOffsetY=a.touches[0].clientY,e.controlCoordinates.touchCount=a.touches.length,e.controlCoordinates.touchmoveCount++,e.controlCoordinates.touchCount>1?(e.controlCoordinates.pointerOffsetX2=a.touches[1].clientX,e.controlCoordinates.pointerOffsetY2=a.touches[1].clientY,e.controlCoordinates.targetPinchDistance=Math.sqrt((e.controlCoordinates.pointerOffsetX-e.controlCoordinates.pointerOffsetX2)*(e.controlCoordinates.pointerOffsetX-e.controlCoordinates.pointerOffsetX2)+(e.controlCoordinates.pointerOffsetY-e.controlCoordinates.pointerOffsetY2)*(e.controlCoordinates.pointerOffsetY-e.controlCoordinates.pointerOffsetY2)),e.controlCoordinates.initialPinchDistance===null&&(e.controlCoordinates.initialPinchDistance=e.controlCoordinates.targetPinchDistance),Math.abs(e.controlCoordinates.initialPinchDistance-e.controlCoordinates.targetPinchDistance)>=1&&(e.controlCoordinates.targetScale=e.minMax(e.controlCoordinates.targetPinchDistance/e.controlCoordinates.initialPinchDistance*e.controlCoordinates.initialScale,1,e.options.maxZoom),e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.scaleDifference=e.controlCoordinates.targetScale-e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.initialOffsetX-(e.controlCoordinates.pinchOffsetX-e.controlCoordinates.containerOffsetX-e.controlCoordinates.containerWidth/2-e.controlCoordinates.initialOffsetX)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,e.controlCoordinates.limitOffsetX*-1,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.initialOffsetY-(e.controlCoordinates.pinchOffsetY-e.controlCoordinates.containerOffsetY-e.controlCoordinates.containerHeight/2-e.controlCoordinates.initialOffsetY)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,e.controlCoordinates.limitOffsetY*-1,e.controlCoordinates.limitOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale),e.controlCoordinates.targetScale>1&&(e.controlCoordinates.zoomed=!0,(!e.domNodes.caption.style.opacity||e.domNodes.caption.style.opacity>0)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed)),e.controlCoordinates.initialPinchDistance=e.controlCoordinates.targetPinchDistance,e.controlCoordinates.initialScale=e.controlCoordinates.targetScale,e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY)):(e.controlCoordinates.targetScale=e.controlCoordinates.initialScale,e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.pointerOffsetX-(e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialOffsetX),e.controlCoordinates.limitOffsetX*-1,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.pointerOffsetY-(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialOffsetY),e.controlCoordinates.limitOffsetY*-1,e.controlCoordinates.limitOffsetY),Math.abs(e.controlCoordinates.targetOffsetX)===Math.abs(e.controlCoordinates.limitOffsetX)&&(e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialPointerOffsetX=e.controlCoordinates.pointerOffsetX),Math.abs(e.controlCoordinates.targetOffsetY)===Math.abs(e.controlCoordinates.limitOffsetY)&&(e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY,e.controlCoordinates.initialPointerOffsetY=e.controlCoordinates.pointerOffsetY),e.setZoomData(e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale))}if(a.type==="mousemove"&&e.controlCoordinates.mousedown){if(a.type=="touchmove")return!0;if(a.preventDefault(),e.controlCoordinates.capture===!1)return!1;e.controlCoordinates.pointerOffsetX=a.clientX,e.controlCoordinates.pointerOffsetY=a.clientY,e.controlCoordinates.targetScale=e.controlCoordinates.initialScale,e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.pointerOffsetX-(e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialOffsetX),e.controlCoordinates.limitOffsetX*-1,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.pointerOffsetY-(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialOffsetY),e.controlCoordinates.limitOffsetY*-1,e.controlCoordinates.limitOffsetY),Math.abs(e.controlCoordinates.targetOffsetX)===Math.abs(e.controlCoordinates.limitOffsetX)&&(e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialPointerOffsetX=e.controlCoordinates.pointerOffsetX),Math.abs(e.controlCoordinates.targetOffsetY)===Math.abs(e.controlCoordinates.limitOffsetY)&&(e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY,e.controlCoordinates.initialPointerOffsetY=e.controlCoordinates.pointerOffsetY),e.setZoomData(e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale)}e.controlCoordinates.zoomed||(e.controlCoordinates.swipeEnd=a.pageX||a.touches[0].pageX,e.controlCoordinates.swipeYEnd=a.pageY||a.touches[0].pageY,e.controlCoordinates.swipeDiff=e.controlCoordinates.swipeStart-e.controlCoordinates.swipeEnd,e.controlCoordinates.swipeYDiff=e.controlCoordinates.swipeYStart-e.controlCoordinates.swipeYEnd,e.options.animationSlide&&e.slide(0,-e.controlCoordinates.swipeDiff+"px"))}),this.addEventListener(this.domNodes.image,["touchend."+this.eventNamespace,"mouseup."+this.eventNamespace,"touchcancel."+this.eventNamespace,"mouseleave."+this.eventNamespace,"pointerup","pointercancel","MSPointerUp","MSPointerCancel"],function(a){if(e.isTouchDevice&&a.type==="touchend"&&(e.controlCoordinates.touchCount=a.touches.length,e.controlCoordinates.touchCount===0?(e.currentImage&&e.setZoomData(e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.controlCoordinates.initialScale===1&&(e.controlCoordinates.zoomed=!1,e.domNodes.caption.style.display==="none"&&e.fadeIn(e.domNodes.caption,e.options.fadeSpeed)),e.controlCoordinates.initialPinchDistance=null,e.controlCoordinates.capture=!1):e.controlCoordinates.touchCount===1?(e.controlCoordinates.initialPointerOffsetX=a.touches[0].clientX,e.controlCoordinates.initialPointerOffsetY=a.touches[0].clientY):e.controlCoordinates.touchCount>1&&(e.controlCoordinates.initialPinchDistance=null)),e.controlCoordinates.mousedown){e.controlCoordinates.mousedown=!1;var l=!0;e.options.loop||(e.currentImageIndex===0&&e.controlCoordinates.swipeDiff<0&&(l=!1),e.currentImageIndex>=e.relatedElements.length-1&&e.controlCoordinates.swipeDiff>0&&(l=!1)),Math.abs(e.controlCoordinates.swipeDiff)>e.options.swipeTolerance&&l?e.loadImage(e.controlCoordinates.swipeDiff>0?1:-1):e.options.animationSlide&&e.slide(e.options.animationSpeed/1e3,0+"px"),e.options.swipeClose&&Math.abs(e.controlCoordinates.swipeYDiff)>50&&Math.abs(e.controlCoordinates.swipeDiff)<e.options.swipeTolerance&&e.close()}}),this.addEventListener(this.domNodes.image,["dblclick"],function(a){if(!e.isTouchDevice)return e.controlCoordinates.initialPointerOffsetX=a.clientX,e.controlCoordinates.initialPointerOffsetY=a.clientY,e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.currentImage.classList.add("sl-transition"),e.controlCoordinates.zoomed?(e.controlCoordinates.initialScale=1,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement(0+"px",0+"px",e.controlCoordinates.initialScale),e.controlCoordinates.zoomed=!1,e.domNodes.caption.style.display==="none"&&e.fadeIn(e.domNodes.caption,e.options.fadeSpeed)):(e.controlCoordinates.initialScale=e.options.doubleTapZoom,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement(0+"px",0+"px",e.controlCoordinates.initialScale),(!e.domNodes.caption.style.opacity||e.domNodes.caption.style.opacity>0)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed),e.controlCoordinates.zoomed=!0),setTimeout(function(){e.currentImage&&(e.currentImage.classList.remove("sl-transition"),e.currentImage.style[e.transitionPrefix+"transform-origin"]=null)},200),e.controlCoordinates.capture=!0,!1})}},{key:"getDimensions",value:function(e){var n=window.getComputedStyle(e),a=e.offsetHeight,l=e.offsetWidth,f=parseFloat(n.borderTopWidth),w=parseFloat(n.borderBottomWidth),b=parseFloat(n.paddingTop),v=parseFloat(n.paddingBottom),L=parseFloat(n.borderLeftWidth),M=parseFloat(n.borderRightWidth),x=parseFloat(n.paddingLeft),g=parseFloat(n.paddingRight);return{height:a-w-f-b-v,width:l-L-M-x-g}}},{key:"updateHash",value:function(){var e="pid="+(this.currentImageIndex+1),n=window.location.href.split("#")[0]+"#"+e;this.hashReseted=!1,this.pushStateSupport?window.history[this.historyHasChanges?"replaceState":"pushState"]("",document.title,n):this.historyHasChanges?window.location.replace(n):window.location.hash=e,this.historyHasChanges||(this.urlChangedOnce=!0),this.historyHasChanges=!0}},{key:"resetHash",value:function(){this.hashReseted=!0,this.urlChangedOnce?history.back():this.pushStateSupport?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="",clearTimeout(this.historyUpdateTimeout)}},{key:"updateURL",value:function(){clearTimeout(this.historyUpdateTimeout),this.historyHasChanges?this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800):this.updateHash()}},{key:"setCaption",value:function(e,n,a){var l=this;if(this.options.captions&&e&&e!==""&&typeof e<"u"){var f,w=!((f=a??this.options.captionHTML)!==null&&f!==void 0)||f?"innerHTML":"innerText";this.hide(this.domNodes.caption),this.domNodes.caption.style.width=n+"px",this.domNodes.caption[w]=e,this.domNodes.image.appendChild(this.domNodes.caption),setTimeout(function(){l.fadeIn(l.domNodes.caption,l.options.fadeSpeed)},this.options.captionDelay)}}},{key:"slide",value:function(e,n){if(!this.transitionCapable)return this.domNodes.image.style.left=n;this.domNodes.image.style[this.transitionPrefix+"transform"]="translateX("+n+")",this.domNodes.image.style[this.transitionPrefix+"transition"]=this.transitionPrefix+"transform "+e+"s linear"}},{key:"getRelated",value:function(e){var n;return e&&e!==!1&&e!=="nofollow"?n=Array.from(this.elements).filter(function(a){return a.getAttribute("rel")===e}):n=this.elements,n}},{key:"openImage",value:function(e){var n=this;e.dispatchEvent(new Event("show."+this.eventNamespace)),this.globalScrollbarWidth=this.getScrollbarWidth(),this.options.disableScroll&&(this.toggleScrollbar("hide"),this.globalScrollbarWidth=0),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.add(this.options.htmlClass),document.body.appendChild(this.domNodes.wrapper),this.domNodes.wrapper.appendChild(this.domNodes.image),this.options.overlay&&document.body.appendChild(this.domNodes.overlay),this.relatedElements=this.getRelated(e.rel),this.options.showCounter&&(this.relatedElements.length==1&&this.domNodes.wrapper.contains(this.domNodes.counter)?this.domNodes.wrapper.removeChild(this.domNodes.counter):this.relatedElements.length>1&&!this.domNodes.wrapper.contains(this.domNodes.counter)&&this.domNodes.wrapper.appendChild(this.domNodes.counter)),this.options.download&&this.domNodes.download&&this.domNodes.wrapper.appendChild(this.domNodes.download),this.isAnimating=!0,this.currentImageIndex=this.relatedElements.indexOf(e);var a=e.getAttribute(this.options.sourceAttr);this.currentImage=document.createElement("img"),this.currentImage.style.display="none",this.currentImage.setAttribute("src",a),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.loadedImages.indexOf(a)===-1&&this.loadedImages.push(a),this.domNodes.image.innerHTML="",this.domNodes.image.setAttribute("style",""),this.domNodes.image.appendChild(this.currentImage),this.fadeIn(this.domNodes.overlay,this.options.fadeSpeed),this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton,this.domNodes.download],this.options.fadeSpeed),this.show(this.domNodes.spinner),this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.domNodes.counter.querySelector(".sl-total").innerHTML=this.relatedElements.length,this.adjustImage(),this.options.preloading&&this.preload(),setTimeout(function(){e.dispatchEvent(new Event("shown."+n.eventNamespace))},this.options.animationSpeed)}},{key:"forceFocus",value:function(){var e=this;this.removeEventListener(document,"focusin."+this.eventNamespace),this.addEventListener(document,"focusin."+this.eventNamespace,function(n){document!==n.target&&e.domNodes.wrapper!==n.target&&!e.domNodes.wrapper.contains(n.target)&&e.domNodes.wrapper.focus()})}},{key:"addEventListener",value:function(e,n,a,l){e=this.wrap(e),n=this.wrap(n);var f=r(e),w;try{for(f.s();!(w=f.n()).done;){var b=w.value;b.namespaces||(b.namespaces={});var v=r(n),L;try{for(v.s();!(L=v.n()).done;){var M=L.value,x=l||!1,g=["touchstart","touchmove","mousewheel","DOMMouseScroll"].indexOf(M.split(".")[0])>=0;g&&this.isPassiveEventsSupported&&(t(x)==="object"?x.passive=!0:x={passive:!0}),b.namespaces[M]=a,b.addEventListener(M.split(".")[0],a,x)}}catch(m){v.e(m)}finally{v.f()}}}catch(m){f.e(m)}finally{f.f()}}},{key:"removeEventListener",value:function(e,n){e=this.wrap(e),n=this.wrap(n);var a=r(e),l;try{for(a.s();!(l=a.n()).done;){var f=l.value,w=r(n),b;try{for(w.s();!(b=w.n()).done;){var v=b.value;f.namespaces&&f.namespaces[v]&&(f.removeEventListener(v.split(".")[0],f.namespaces[v]),delete f.namespaces[v])}}catch(L){w.e(L)}finally{w.f()}}}catch(L){a.e(L)}finally{a.f()}}},{key:"fadeOut",value:function(e,n,a){var l=this;e=this.wrap(e);var f=r(e),w;try{for(f.s();!(w=f.n()).done;){var b=w.value;b.style.opacity=parseFloat(b)||window.getComputedStyle(b).getPropertyValue("opacity")}}catch(M){f.e(M)}finally{f.f()}this.isFadeIn=!1;var v=16.66666/(n||this.options.fadeSpeed),L=function M(){var x=parseFloat(e[0].style.opacity);if((x-=v)<0){var g=r(e),m;try{for(g.s();!(m=g.n()).done;){var C=m.value;C.style.display="none",C.style.opacity=1}}catch(D){g.e(D)}finally{g.f()}a&&a.call(l,e)}else{var T=r(e),P;try{for(T.s();!(P=T.n()).done;){var A=P.value;A.style.opacity=x}}catch(D){T.e(D)}finally{T.f()}requestAnimationFrame(M)}};L()}},{key:"fadeIn",value:function(e,n,a,l){var f=this;e=this.wrap(e);var w=r(e),b;try{for(w.s();!(b=w.n()).done;){var v=b.value;v&&(v.style.opacity=0,v.style.display=l||"block")}}catch(g){w.e(g)}finally{w.f()}this.isFadeIn=!0;var L=parseFloat(e[0].dataset.opacityTarget||1),M=16.66666*L/(n||this.options.fadeSpeed),x=function g(){var m=parseFloat(e[0].style.opacity);if((m+=M)>L){var A=r(e),D;try{for(A.s();!(D=A.n()).done;){var Y=D.value;Y&&(Y.style.opacity=L)}}catch(_){A.e(_)}finally{A.f()}a&&a.call(f,e)}else{var C=r(e),T;try{for(C.s();!(T=C.n()).done;){var P=T.value;P&&(P.style.opacity=m)}}catch(_){C.e(_)}finally{C.f()}if(!f.isFadeIn)return;requestAnimationFrame(g)}};x()}},{key:"hide",value:function(e){e=this.wrap(e);var n=r(e),a;try{for(n.s();!(a=n.n()).done;){var l=a.value;l.style.display!="none"&&(l.dataset.initialDisplay=l.style.display),l.style.display="none"}}catch(f){n.e(f)}finally{n.f()}}},{key:"show",value:function(e,n){e=this.wrap(e);var a=r(e),l;try{for(a.s();!(l=a.n()).done;){var f=l.value;f.style.display=f.dataset.initialDisplay||n||"block"}}catch(w){a.e(w)}finally{a.f()}}},{key:"wrap",value:function(e){return typeof e[Symbol.iterator]=="function"&&typeof e!="string"?e:[e]}},{key:"on",value:function(e,n){e=this.wrap(e);var a=r(this.elements),l;try{for(a.s();!(l=a.n()).done;){var f=l.value;f.fullyNamespacedEvents||(f.fullyNamespacedEvents={});var w=r(e),b;try{for(w.s();!(b=w.n()).done;){var v=b.value;f.fullyNamespacedEvents[v]=n,f.addEventListener(v,n)}}catch(L){w.e(L)}finally{w.f()}}}catch(L){a.e(L)}finally{a.f()}return this}},{key:"off",value:function(e){e=this.wrap(e);var n=r(this.elements),a;try{for(n.s();!(a=n.n()).done;){var l=a.value,f=r(e),w;try{for(f.s();!(w=f.n()).done;){var b=w.value;typeof l.fullyNamespacedEvents<"u"&&b in l.fullyNamespacedEvents&&l.removeEventListener(b,l.fullyNamespacedEvents[b])}}catch(v){f.e(v)}finally{f.f()}}}catch(v){n.e(v)}finally{n.f()}return this}},{key:"open",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;e=e||this.elements[0],typeof jQuery<"u"&&e instanceof jQuery&&(e=e.get(0)),n>0&&(e=this.elements[n]),this.initialImageIndex=this.elements.indexOf(e),this.initialImageIndex>-1&&this.openImage(e)}},{key:"openPosition",value:function(e){var n=this.elements[e];this.open(n,e)}},{key:"next",value:function(){this.loadImage(1)}},{key:"prev",value:function(){this.loadImage(-1)}},{key:"getLighboxData",value:function(){return{currentImageIndex:this.currentImageIndex,currentImage:this.currentImage,globalScrollbarWidth:this.globalScrollbarWidth}}},{key:"destroy",value:function(){this.off(["close."+this.eventNamespace,"closed."+this.eventNamespace,"nextImageLoaded."+this.eventNamespace,"prevImageLoaded."+this.eventNamespace,"change."+this.eventNamespace,"nextDone."+this.eventNamespace,"prevDone."+this.eventNamespace,"error."+this.eventNamespace,"changed."+this.eventNamespace,"next."+this.eventNamespace,"prev."+this.eventNamespace,"show."+this.eventNamespace,"shown."+this.eventNamespace]),this.removeEventListener(this.elements,"click."+this.eventNamespace),this.removeEventListener(document,"focusin."+this.eventNamespace),this.removeEventListener(document.body,"contextmenu."+this.eventNamespace),this.removeEventListener(document.body,"keyup."+this.eventNamespace),this.removeEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace),this.removeEventListener(this.domNodes.closeButton,"click."+this.eventNamespace),this.removeEventListener(window,"resize."+this.eventNamespace),this.removeEventListener(window,"hashchange."+this.eventNamespace),this.close(),this.isOpen&&(document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay)),this.elements=null}},{key:"refresh",value:function(){if(!this.initialSelector)throw"refreshing only works when you initialize using a selector!";var e=this.options,n=this.initialSelector;return this.destroy(),this.constructor(n,e),this}}]),E}(),k=I;o.default=k,Be.SimpleLightbox=I})(Ie);const _t=Ve(Ie);function be(o,t){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),r.push.apply(r,i)}return r}function Oe(o){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?be(Object(r),!0).forEach(function(i){se(o,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach(function(i){Object.defineProperty(o,i,Object.getOwnPropertyDescriptor(r,i))})}return o}function X(){X=function(){return o};var o={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(g,m,C){g[m]=C.value},s=typeof Symbol=="function"?Symbol:{},c=s.iterator||"@@iterator",d=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function y(g,m,C){return Object.defineProperty(g,m,{value:C,enumerable:!0,configurable:!0,writable:!0}),g[m]}try{y({},"")}catch{y=function(m,C,T){return m[C]=T}}function u(g,m,C,T){var P=m&&m.prototype instanceof O?m:O,A=Object.create(P.prototype),D=new L(T||[]);return i(A,"_invoke",{value:f(g,C,D)}),A}function S(g,m,C){try{return{type:"normal",arg:g.call(m,C)}}catch(T){return{type:"throw",arg:T}}}o.wrap=u;var N={};function O(){}function I(){}function k(){}var E={};y(E,c,function(){return this});var p=Object.getPrototypeOf,e=p&&p(p(M([])));e&&e!==t&&r.call(e,c)&&(E=e);var n=k.prototype=O.prototype=Object.create(E);function a(g){["next","throw","return"].forEach(function(m){y(g,m,function(C){return this._invoke(m,C)})})}function l(g,m){function C(P,A,D,Y){var _=S(g[P],g,A);if(_.type!=="throw"){var $=_.arg,Q=$.value;return Q&&typeof Q=="object"&&r.call(Q,"__await")?m.resolve(Q.__await).then(function(W){C("next",W,D,Y)},function(W){C("throw",W,D,Y)}):m.resolve(Q).then(function(W){$.value=W,D($)},function(W){return C("throw",W,D,Y)})}Y(_.arg)}var T;i(this,"_invoke",{value:function(P,A){function D(){return new m(function(Y,_){C(P,A,Y,_)})}return T=T?T.then(D,D):D()}})}function f(g,m,C){var T="suspendedStart";return function(P,A){if(T==="executing")throw new Error("Generator is already running");if(T==="completed"){if(P==="throw")throw A;return x()}for(C.method=P,C.arg=A;;){var D=C.delegate;if(D){var Y=w(D,C);if(Y){if(Y===N)continue;return Y}}if(C.method==="next")C.sent=C._sent=C.arg;else if(C.method==="throw"){if(T==="suspendedStart")throw T="completed",C.arg;C.dispatchException(C.arg)}else C.method==="return"&&C.abrupt("return",C.arg);T="executing";var _=S(g,m,C);if(_.type==="normal"){if(T=C.done?"completed":"suspendedYield",_.arg===N)continue;return{value:_.arg,done:C.done}}_.type==="throw"&&(T="completed",C.method="throw",C.arg=_.arg)}}}function w(g,m){var C=m.method,T=g.iterator[C];if(T===void 0)return m.delegate=null,C==="throw"&&g.iterator.return&&(m.method="return",m.arg=void 0,w(g,m),m.method==="throw")||C!=="return"&&(m.method="throw",m.arg=new TypeError("The iterator does not provide a '"+C+"' method")),N;var P=S(T,g.iterator,m.arg);if(P.type==="throw")return m.method="throw",m.arg=P.arg,m.delegate=null,N;var A=P.arg;return A?A.done?(m[g.resultName]=A.value,m.next=g.nextLoc,m.method!=="return"&&(m.method="next",m.arg=void 0),m.delegate=null,N):A:(m.method="throw",m.arg=new TypeError("iterator result is not an object"),m.delegate=null,N)}function b(g){var m={tryLoc:g[0]};1 in g&&(m.catchLoc=g[1]),2 in g&&(m.finallyLoc=g[2],m.afterLoc=g[3]),this.tryEntries.push(m)}function v(g){var m=g.completion||{};m.type="normal",delete m.arg,g.completion=m}function L(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(b,this),this.reset(!0)}function M(g){if(g){var m=g[c];if(m)return m.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var C=-1,T=function P(){for(;++C<g.length;)if(r.call(g,C))return P.value=g[C],P.done=!1,P;return P.value=void 0,P.done=!0,P};return T.next=T}}return{next:x}}function x(){return{value:void 0,done:!0}}return I.prototype=k,i(n,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:I,configurable:!0}),I.displayName=y(k,h,"GeneratorFunction"),o.isGeneratorFunction=function(g){var m=typeof g=="function"&&g.constructor;return!!m&&(m===I||(m.displayName||m.name)==="GeneratorFunction")},o.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,k):(g.__proto__=k,y(g,h,"GeneratorFunction")),g.prototype=Object.create(n),g},o.awrap=function(g){return{__await:g}},a(l.prototype),y(l.prototype,d,function(){return this}),o.AsyncIterator=l,o.async=function(g,m,C,T,P){P===void 0&&(P=Promise);var A=new l(u(g,m,C,T),P);return o.isGeneratorFunction(m)?A:A.next().then(function(D){return D.done?D.value:A.next()})},a(n),y(n,h,"Generator"),y(n,c,function(){return this}),y(n,"toString",function(){return"[object Generator]"}),o.keys=function(g){var m=Object(g),C=[];for(var T in m)C.push(T);return C.reverse(),function P(){for(;C.length;){var A=C.pop();if(A in m)return P.value=A,P.done=!1,P}return P.done=!0,P}},o.values=M,L.prototype={constructor:L,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!g)for(var m in this)m.charAt(0)==="t"&&r.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=void 0)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if(g.type==="throw")throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var m=this;function C(_,$){return A.type="throw",A.arg=g,m.next=_,$&&(m.method="next",m.arg=void 0),!!$}for(var T=this.tryEntries.length-1;T>=0;--T){var P=this.tryEntries[T],A=P.completion;if(P.tryLoc==="root")return C("end");if(P.tryLoc<=this.prev){var D=r.call(P,"catchLoc"),Y=r.call(P,"finallyLoc");if(D&&Y){if(this.prev<P.catchLoc)return C(P.catchLoc,!0);if(this.prev<P.finallyLoc)return C(P.finallyLoc)}else if(D){if(this.prev<P.catchLoc)return C(P.catchLoc,!0)}else{if(!Y)throw new Error("try statement without catch or finally");if(this.prev<P.finallyLoc)return C(P.finallyLoc)}}}},abrupt:function(g,m){for(var C=this.tryEntries.length-1;C>=0;--C){var T=this.tryEntries[C];if(T.tryLoc<=this.prev&&r.call(T,"finallyLoc")&&this.prev<T.finallyLoc){var P=T;break}}P&&(g==="break"||g==="continue")&&P.tryLoc<=m&&m<=P.finallyLoc&&(P=null);var A=P?P.completion:{};return A.type=g,A.arg=m,P?(this.method="next",this.next=P.finallyLoc,N):this.complete(A)},complete:function(g,m){if(g.type==="throw")throw g.arg;return g.type==="break"||g.type==="continue"?this.next=g.arg:g.type==="return"?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):g.type==="normal"&&m&&(this.next=m),N},finish:function(g){for(var m=this.tryEntries.length-1;m>=0;--m){var C=this.tryEntries[m];if(C.finallyLoc===g)return this.complete(C.completion,C.afterLoc),v(C),N}},catch:function(g){for(var m=this.tryEntries.length-1;m>=0;--m){var C=this.tryEntries[m];if(C.tryLoc===g){var T=C.completion;if(T.type==="throw"){var P=T.arg;v(C)}return P}}throw new Error("illegal catch attempt")},delegateYield:function(g,m,C){return this.delegate={iterator:M(g),resultName:m,nextLoc:C},this.method==="next"&&(this.arg=void 0),N}},o}function Ee(o,t,r,i,s,c,d){try{var h=o[c](d),y=h.value}catch(u){r(u);return}h.done?t(y):Promise.resolve(y).then(i,s)}function z(o){return function(){var t=this,r=arguments;return new Promise(function(i,s){var c=o.apply(t,r);function d(y){Ee(c,i,s,d,h,"next",y)}function h(y){Ee(c,i,s,d,h,"throw",y)}d(void 0)})}}function Te(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(o,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,Ae(i.key),i)}}function Le(o,t,r){return t&&Se(o.prototype,t),r&&Se(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o}function se(o,t,r){return t=Ae(t),t in o?Object.defineProperty(o,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[t]=r,o}function Ue(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&ee(o,t)}function K(o){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},K(o)}function ee(o,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},ee(o,t)}function Me(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function le(o,t,r){return Me()?le=Reflect.construct.bind():le=function(s,c,d){var h=[null];h.push.apply(h,c);var y=Function.bind.apply(s,h),u=new y;return d&&ee(u,d.prototype),u},le.apply(null,arguments)}function Ze(o){return Function.toString.call(o).indexOf("[native code]")!==-1}function ye(o){var t=typeof Map=="function"?new Map:void 0;return ye=function(i){if(i===null||!Ze(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(i))return t.get(i);t.set(i,s)}function s(){return le(i,arguments,K(this).constructor)}return s.prototype=Object.create(i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),ee(s,i)},ye(o)}function ce(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Ge(o,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ce(o)}function Qe(o){var t=Me();return function(){var i=K(o),s;if(t){var c=K(this).constructor;s=Reflect.construct(i,arguments,c)}else s=i.apply(this,arguments);return Ge(this,s)}}function Je(o,t){if(typeof o!="object"||o===null)return o;var r=o[Symbol.toPrimitive];if(r!==void 0){var i=r.call(o,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(o)}function Ae(o){var t=Je(o,"string");return typeof t=="symbol"?t:String(t)}var De=typeof global<"u"&&{}.toString.call(global)==="[object global]";function Ne(o,t){return o.indexOf(t.toLowerCase())===0?o:"".concat(t.toLowerCase()).concat(o.substr(0,1).toUpperCase()).concat(o.substr(1))}function Ke(o){return Boolean(o&&o.nodeType===1&&"nodeName"in o&&o.ownerDocument&&o.ownerDocument.defaultView)}function et(o){return!isNaN(parseFloat(o))&&isFinite(o)&&Math.floor(o)==o}function B(o){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(o)}function xe(o){var t=/^https:\/\/player\.vimeo\.com\/video\/\d+/;return t.test(o)}function _e(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=o.id,r=o.url,i=t||r;if(!i)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(et(i))return"https://vimeo.com/".concat(i);if(B(i))return i.replace("http:","https:");throw t?new TypeError("“".concat(t,"” is not a valid video id.")):new TypeError("“".concat(i,"” is not a vimeo.com url."))}var ke=function(t,r,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"addEventListener",c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"removeEventListener",d=typeof r=="string"?[r]:r;return d.forEach(function(h){t[s](h,i)}),{cancel:function(){return d.forEach(function(y){return t[c](y,i)})}}},tt=typeof Array.prototype.indexOf<"u",nt=typeof window<"u"&&typeof window.postMessage<"u";if(!De&&(!tt||!nt))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ot(o,t){return t={exports:{}},o(t,t.exports),t.exports}(function(o){if(o.WeakMap)return;var t=Object.prototype.hasOwnProperty,r=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{value:1}).x===1}catch{}}(),i=function(c,d,h){r?Object.defineProperty(c,d,{configurable:!0,writable:!0,value:h}):c[d]=h};o.WeakMap=function(){function c(){if(this===void 0)throw new TypeError("Constructor WeakMap requires 'new'");if(i(this,"_id",h("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}i(c.prototype,"delete",function(u){if(d(this,"delete"),!s(u))return!1;var S=u[this._id];return S&&S[0]===u?(delete u[this._id],!0):!1}),i(c.prototype,"get",function(u){if(d(this,"get"),!!s(u)){var S=u[this._id];if(S&&S[0]===u)return S[1]}}),i(c.prototype,"has",function(u){if(d(this,"has"),!s(u))return!1;var S=u[this._id];return!!(S&&S[0]===u)}),i(c.prototype,"set",function(u,S){if(d(this,"set"),!s(u))throw new TypeError("Invalid value used as weak map key");var N=u[this._id];return N&&N[0]===u?(N[1]=S,this):(i(u,this._id,[u,S]),this)});function d(u,S){if(!s(u)||!t.call(u,"_id"))throw new TypeError(S+" method called on incompatible receiver "+typeof u)}function h(u){return u+"_"+y()+"."+y()}function y(){return Math.random().toString().substring(2)}return i(c,"_polyfill",!0),c}();function s(c){return Object(c)===c}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Z);var F=ot(function(o){(function(r,i,s){i[r]=i[r]||s(),o.exports&&(o.exports=i[r])})("Promise",Z,function(){var r,i,s,c=Object.prototype.toString,d=typeof setImmediate<"u"?function(a){return setImmediate(a)}:setTimeout;try{Object.defineProperty({},"x",{}),r=function(a,l,f,w){return Object.defineProperty(a,l,{value:f,writable:!0,configurable:w!==!1})}}catch{r=function(l,f,w){return l[f]=w,l}}s=function(){var a,l,f;function w(b,v){this.fn=b,this.self=v,this.next=void 0}return{add:function(v,L){f=new w(v,L),l?l.next=f:a=f,l=f,f=void 0},drain:function(){var v=a;for(a=l=i=void 0;v;)v.fn.call(v.self),v=v.next}}}();function h(n,a){s.add(n,a),i||(i=d(s.drain))}function y(n){var a,l=typeof n;return n!=null&&(l=="object"||l=="function")&&(a=n.then),typeof a=="function"?a:!1}function u(){for(var n=0;n<this.chain.length;n++)S(this,this.state===1?this.chain[n].success:this.chain[n].failure,this.chain[n]);this.chain.length=0}function S(n,a,l){var f,w;try{a===!1?l.reject(n.msg):(a===!0?f=n.msg:f=a.call(void 0,n.msg),f===l.promise?l.reject(TypeError("Promise-chain cycle")):(w=y(f))?w.call(f,l.resolve,l.reject):l.resolve(f))}catch(b){l.reject(b)}}function N(n){var a,l=this;if(!l.triggered){l.triggered=!0,l.def&&(l=l.def);try{(a=y(n))?h(function(){var f=new k(l);try{a.call(n,function(){N.apply(f,arguments)},function(){O.apply(f,arguments)})}catch(w){O.call(f,w)}}):(l.msg=n,l.state=1,l.chain.length>0&&h(u,l))}catch(f){O.call(new k(l),f)}}}function O(n){var a=this;a.triggered||(a.triggered=!0,a.def&&(a=a.def),a.msg=n,a.state=2,a.chain.length>0&&h(u,a))}function I(n,a,l,f){for(var w=0;w<a.length;w++)(function(v){n.resolve(a[v]).then(function(M){l(v,M)},f)})(w)}function k(n){this.def=n,this.triggered=!1}function E(n){this.promise=n,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(n){if(typeof n!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var a=new E(this);this.then=function(f,w){var b={success:typeof f=="function"?f:!0,failure:typeof w=="function"?w:!1};return b.promise=new this.constructor(function(L,M){if(typeof L!="function"||typeof M!="function")throw TypeError("Not a function");b.resolve=L,b.reject=M}),a.chain.push(b),a.state!==0&&h(u,a),b.promise},this.catch=function(f){return this.then(void 0,f)};try{n.call(void 0,function(f){N.call(a,f)},function(f){O.call(a,f)})}catch(l){O.call(a,l)}}var e=r({},"constructor",p,!1);return p.prototype=e,r(e,"__NPO__",0,!1),r(p,"resolve",function(a){var l=this;return a&&typeof a=="object"&&a.__NPO__===1?a:new l(function(w,b){if(typeof w!="function"||typeof b!="function")throw TypeError("Not a function");w(a)})}),r(p,"reject",function(a){return new this(function(f,w){if(typeof f!="function"||typeof w!="function")throw TypeError("Not a function");w(a)})}),r(p,"all",function(a){var l=this;return c.call(a)!="[object Array]"?l.reject(TypeError("Not an array")):a.length===0?l.resolve([]):new l(function(w,b){if(typeof w!="function"||typeof b!="function")throw TypeError("Not a function");var v=a.length,L=Array(v),M=0;I(l,a,function(g,m){L[g]=m,++M===v&&w(L)},b)})}),r(p,"race",function(a){var l=this;return c.call(a)!="[object Array]"?l.reject(TypeError("Not an array")):new l(function(w,b){if(typeof w!="function"||typeof b!="function")throw TypeError("Not a function");I(l,a,function(L,M){w(M)},b)})}),p})}),H=new WeakMap;function J(o,t,r){var i=H.get(o.element)||{};t in i||(i[t]=[]),i[t].push(r),H.set(o.element,i)}function de(o,t){var r=H.get(o.element)||{};return r[t]||[]}function fe(o,t,r){var i=H.get(o.element)||{};if(!i[t])return!0;if(!r)return i[t]=[],H.set(o.element,i),!0;var s=i[t].indexOf(r);return s!==-1&&i[t].splice(s,1),H.set(o.element,i),i[t]&&i[t].length===0}function rt(o,t){var r=de(o,t);if(r.length<1)return!1;var i=r.shift();return fe(o,t,i),i}function it(o,t){var r=H.get(o);H.set(t,r),H.delete(o)}function ge(o){if(typeof o=="string")try{o=JSON.parse(o)}catch(t){return console.warn(t),{}}return o}function q(o,t,r){if(!(!o.element.contentWindow||!o.element.contentWindow.postMessage)){var i={method:t};r!==void 0&&(i.value=r);var s=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));s>=8&&s<10&&(i=JSON.stringify(i)),o.element.contentWindow.postMessage(i,o.origin)}}function at(o,t){t=ge(t);var r=[],i;if(t.event){if(t.event==="error"){var s=de(o,t.data.method);s.forEach(function(d){var h=new Error(t.data.message);h.name=t.data.name,d.reject(h),fe(o,t.data.method,d)})}r=de(o,"event:".concat(t.event)),i=t.data}else if(t.method){var c=rt(o,t.method);c&&(r.push(c),i=t.value)}r.forEach(function(d){try{if(typeof d=="function"){d.call(o,i);return}d.resolve(i)}catch{}})}var st=["airplay","audio_tracks","autopause","autoplay","background","byline","cc","chapters","chromecast","color","colors","controls","dnt","fullscreen","height","id","interactive_params","keyboard","loop","maxheight","maxwidth","muted","play_button_position","playsinline","portrait","progress_bar","quality_selector","responsive","speed","texttrack","title","transcript","transparent","url","vimeo_logo","volume","width"];function Ye(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return st.reduce(function(r,i){var s=o.getAttribute("data-vimeo-".concat(i));return(s||s==="")&&(r[i]=s===""?1:s),r},t)}function we(o,t){var r=o.html;if(!t)throw new TypeError("An element must be provided");if(t.getAttribute("data-vimeo-initialized")!==null)return t.querySelector("iframe");var i=document.createElement("div");return i.innerHTML=r,t.appendChild(i.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function Xe(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return new Promise(function(i,s){if(!B(o))throw new TypeError("“".concat(o,"” is not a vimeo.com url."));var c="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(o));for(var d in t)t.hasOwnProperty(d)&&(c+="&".concat(d,"=").concat(encodeURIComponent(t[d])));var h="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;h.open("GET",c,!0),h.onload=function(){if(h.status===404){s(new Error("“".concat(o,"” was not found.")));return}if(h.status===403){s(new Error("“".concat(o,"” is not embeddable.")));return}try{var y=JSON.parse(h.responseText);if(y.domain_status_code===403){we(y,r),s(new Error("“".concat(o,"” is not embeddable.")));return}i(y)}catch(u){s(u)}},h.onerror=function(){var y=h.status?" (".concat(h.status,")"):"";s(new Error("There was an error fetching the embed code from Vimeo".concat(y,".")))},h.send()})}function lt(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,t=[].slice.call(o.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),r=function(s){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(s))};t.forEach(function(i){try{if(i.getAttribute("data-vimeo-defer")!==null)return;var s=Ye(i),c=_e(s);Xe(c,s,i).then(function(d){return we(d,i)}).catch(r)}catch(d){r(d)}})}function ct(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var t=function(i){if(B(i.origin)&&!(!i.data||i.data.event!=="spacechange")){for(var s=o.querySelectorAll("iframe"),c=0;c<s.length;c++)if(s[c].contentWindow===i.source){var d=s[c].parentElement;d.style.paddingBottom="".concat(i.data.data[0].bottom,"px");break}}};window.addEventListener("message",t)}}function ut(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoSeoMetadataAppended){window.VimeoSeoMetadataAppended=!0;var t=function(i){if(B(i.origin)){var s=ge(i.data);if(!(!s||s.event!=="ready"))for(var c=o.querySelectorAll("iframe"),d=0;d<c.length;d++){var h=c[d],y=h.contentWindow===i.source;if(xe(h.src)&&y){var u=new Re(h);u.callMethod("appendVideoMetadata",window.location.href)}}}};window.addEventListener("message",t)}}function dt(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoCheckedUrlTimeParam){window.VimeoCheckedUrlTimeParam=!0;var t=function(s){"console"in window&&console.error&&console.error("There was an error getting video Id: ".concat(s))},r=function(s){if(B(s.origin)){var c=ge(s.data);if(!(!c||c.event!=="ready"))for(var d=o.querySelectorAll("iframe"),h=function(){var S=d[y],N=S.contentWindow===s.source;if(xe(S.src)&&N){var O=new Re(S);O.getVideoId().then(function(I){var k=new RegExp("[?&]vimeo_t_".concat(I,"=([^&#]*)")).exec(window.location.href);if(k&&k[1]){var E=decodeURI(k[1]);O.setCurrentTime(E)}}).catch(t)}},y=0;y<d.length;y++)h()}};window.addEventListener("message",r)}}function ft(){var o=function(){for(var i,s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],c=0,d=s.length,h={};c<d;c++)if(i=s[c],i&&i[1]in document){for(c=0;c<i.length;c++)h[s[0][c]]=i[c];return h}return!1}(),t={fullscreenchange:o.fullscreenchange,fullscreenerror:o.fullscreenerror},r={request:function(s){return new Promise(function(c,d){var h=function u(){r.off("fullscreenchange",u),c()};r.on("fullscreenchange",h),s=s||document.documentElement;var y=s[o.requestFullscreen]();y instanceof Promise&&y.then(h).catch(d)})},exit:function(){return new Promise(function(s,c){if(!r.isFullscreen){s();return}var d=function y(){r.off("fullscreenchange",y),s()};r.on("fullscreenchange",d);var h=document[o.exitFullscreen]();h instanceof Promise&&h.then(d).catch(c)})},on:function(s,c){var d=t[s];d&&document.addEventListener(d,c)},off:function(s,c){var d=t[s];d&&document.removeEventListener(d,c)}};return Object.defineProperties(r,{isFullscreen:{get:function(){return Boolean(document[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[o.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[o.fullscreenEnabled])}}}),r}var ht={role:"viewer",autoPlayMuted:!0,allowedDrift:.3,maxAllowedDrift:1,minCheckInterval:.1,maxRateAdjustment:.2,maxTimeToCatchUp:1},pt=function(o){Ue(r,o);var t=Qe(r);function r(i,s){var c,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments.length>3?arguments[3]:void 0;return Te(this,r),c=t.call(this),se(ce(c),"logger",void 0),se(ce(c),"speedAdjustment",0),se(ce(c),"adjustSpeed",function(){var y=z(X().mark(function u(S,N){var O;return X().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(c.speedAdjustment!==N){k.next=2;break}return k.abrupt("return");case 2:return k.next=4,S.getPlaybackRate();case 4:return k.t0=k.sent,k.t1=c.speedAdjustment,k.t2=k.t0-k.t1,k.t3=N,O=k.t2+k.t3,c.log("New playbackRate:  ".concat(O)),k.next=12,S.setPlaybackRate(O);case 12:c.speedAdjustment=N;case 13:case"end":return k.stop()}},u)}));return function(u,S){return y.apply(this,arguments)}}()),c.logger=h,c.init(s,i,Oe(Oe({},ht),d)),c}return Le(r,[{key:"disconnect",value:function(){this.dispatchEvent(new Event("disconnect"))}},{key:"init",value:function(){var i=z(X().mark(function c(d,h,y){var u=this,S,N,O;return X().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.waitForTOReadyState(d,"open");case 2:if(y.role!=="viewer"){k.next=10;break}return k.next=5,this.updatePlayer(d,h,y);case 5:S=ke(d,"change",function(){return u.updatePlayer(d,h,y)}),N=this.maintainPlaybackPosition(d,h,y),this.addEventListener("disconnect",function(){N.cancel(),S.cancel()}),k.next=14;break;case 10:return k.next=12,this.updateTimingObject(d,h);case 12:O=ke(h,["seeked","play","pause","ratechange"],function(){return u.updateTimingObject(d,h)},"on","off"),this.addEventListener("disconnect",function(){return O.cancel()});case 14:case"end":return k.stop()}},c,this)}));function s(c,d,h){return i.apply(this,arguments)}return s}()},{key:"updateTimingObject",value:function(){var i=z(X().mark(function c(d,h){return X().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.t0=d,u.next=3,h.getCurrentTime();case 3:return u.t1=u.sent,u.next=6,h.getPaused();case 6:if(!u.sent){u.next=10;break}u.t2=0,u.next=13;break;case 10:return u.next=12,h.getPlaybackRate();case 12:u.t2=u.sent;case 13:u.t3=u.t2,u.t4={position:u.t1,velocity:u.t3},u.t0.update.call(u.t0,u.t4);case 16:case"end":return u.stop()}},c)}));function s(c,d){return i.apply(this,arguments)}return s}()},{key:"updatePlayer",value:function(){var i=z(X().mark(function c(d,h,y){var u,S,N;return X().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(u=d.query(),S=u.position,N=u.velocity,typeof S=="number"&&h.setCurrentTime(S),typeof N!="number"){I.next=25;break}if(N!==0){I.next=11;break}return I.next=6,h.getPaused();case 6:if(I.t0=I.sent,I.t0!==!1){I.next=9;break}h.pause();case 9:I.next=25;break;case 11:if(!(N>0)){I.next=25;break}return I.next=14,h.getPaused();case 14:if(I.t1=I.sent,I.t1!==!0){I.next=19;break}return I.next=18,h.play().catch(function(){var k=z(X().mark(function E(p){return X().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(p.name==="NotAllowedError"&&y.autoPlayMuted)){n.next=5;break}return n.next=3,h.setMuted(!0);case 3:return n.next=5,h.play().catch(function(a){return console.error("Couldn't play the video from TimingSrcConnector. Error:",a)});case 5:case"end":return n.stop()}},E)}));return function(E){return k.apply(this,arguments)}}());case 18:this.updatePlayer(d,h,y);case 19:return I.next=21,h.getPlaybackRate();case 21:if(I.t2=I.sent,I.t3=N,I.t2===I.t3){I.next=25;break}h.setPlaybackRate(N);case 25:case"end":return I.stop()}},c,this)}));function s(c,d,h){return i.apply(this,arguments)}return s}()},{key:"maintainPlaybackPosition",value:function(s,c,d){var h=this,y=d.allowedDrift,u=d.maxAllowedDrift,S=d.minCheckInterval,N=d.maxRateAdjustment,O=d.maxTimeToCatchUp,I=Math.min(O,Math.max(S,u))*1e3,k=function(){var p=z(X().mark(function e(){var n,a,l,f,w;return X().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(v.t0=s.query().velocity===0,v.t0){v.next=6;break}return v.next=4,c.getPaused();case 4:v.t1=v.sent,v.t0=v.t1===!0;case 6:if(!v.t0){v.next=8;break}return v.abrupt("return");case 8:return v.t2=s.query().position,v.next=11,c.getCurrentTime();case 11:if(v.t3=v.sent,n=v.t2-v.t3,a=Math.abs(n),h.log("Drift: ".concat(n)),!(a>u)){v.next=22;break}return v.next=18,h.adjustSpeed(c,0);case 18:c.setCurrentTime(s.query().position),h.log("Resync by currentTime"),v.next=29;break;case 22:if(!(a>y)){v.next=29;break}return l=a/O,f=N,w=l<f?(f-l)/2:f,v.next=28,h.adjustSpeed(c,w*Math.sign(n));case 28:h.log("Resync by playbackRate");case 29:case"end":return v.stop()}},e)}));return function(){return p.apply(this,arguments)}}(),E=setInterval(function(){return k()},I);return{cancel:function(){return clearInterval(E)}}}},{key:"log",value:function(s){var c;(c=this.logger)===null||c===void 0||c.call(this,"TimingSrcConnector: ".concat(s))}},{key:"waitForTOReadyState",value:function(s,c){return new Promise(function(d){var h=function y(){s.readyState===c?d():s.addEventListener("readystatechange",y,{once:!0})};h()})}}]),r}(ye(EventTarget)),U=new WeakMap,ve=new WeakMap,R={},Re=function(){function o(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Te(this,o),window.jQuery&&t instanceof jQuery&&(t.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),t=t[0]),typeof document<"u"&&typeof t=="string"&&(t=document.getElementById(t)),!Ke(t))throw new TypeError("You must pass either a valid element or a valid id.");if(t.nodeName!=="IFRAME"){var s=t.querySelector("iframe");s&&(t=s)}if(t.nodeName==="IFRAME"&&!B(t.getAttribute("src")||""))throw new Error("The player element passed isn’t a Vimeo embed.");if(U.has(t))return U.get(t);this._window=t.ownerDocument.defaultView,this.element=t,this.origin="*";var c=new F(function(h,y){if(r._onMessage=function(N){if(!(!B(N.origin)||r.element.contentWindow!==N.source)){r.origin==="*"&&(r.origin=N.origin);var O=ge(N.data),I=O&&O.event==="error",k=I&&O.data&&O.data.method==="ready";if(k){var E=new Error(O.data.message);E.name=O.data.name,y(E);return}var p=O&&O.event==="ready",e=O&&O.method==="ping";if(p||e){r.element.setAttribute("data-ready","true"),h();return}at(r,O)}},r._window.addEventListener("message",r._onMessage),r.element.nodeName!=="IFRAME"){var u=Ye(t,i),S=_e(u);Xe(S,u,t).then(function(N){var O=we(N,t);return r.element=O,r._originalElement=t,it(t,O),U.set(r.element,r),N}).catch(y)}});if(ve.set(this,c),U.set(this.element,this),this.element.nodeName==="IFRAME"&&q(this,"ping"),R.isEnabled){var d=function(){return R.exit()};this.fullscreenchangeHandler=function(){R.isFullscreen?J(r,"event:exitFullscreen",d):fe(r,"event:exitFullscreen",d),r.ready().then(function(){q(r,"fullscreenchange",R.isFullscreen)})},R.on("fullscreenchange",this.fullscreenchangeHandler)}return this}return Le(o,[{key:"callMethod",value:function(r){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new F(function(c,d){return i.ready().then(function(){J(i,r,{resolve:c,reject:d}),q(i,r,s)}).catch(d)})}},{key:"get",value:function(r){var i=this;return new F(function(s,c){return r=Ne(r,"get"),i.ready().then(function(){J(i,r,{resolve:s,reject:c}),q(i,r)}).catch(c)})}},{key:"set",value:function(r,i){var s=this;return new F(function(c,d){if(r=Ne(r,"set"),i==null)throw new TypeError("There must be a value to set.");return s.ready().then(function(){J(s,r,{resolve:c,reject:d}),q(s,r,i)}).catch(d)})}},{key:"on",value:function(r,i){if(!r)throw new TypeError("You must pass an event name.");if(!i)throw new TypeError("You must pass a callback function.");if(typeof i!="function")throw new TypeError("The callback must be a function.");var s=de(this,"event:".concat(r));s.length===0&&this.callMethod("addEventListener",r).catch(function(){}),J(this,"event:".concat(r),i)}},{key:"off",value:function(r,i){if(!r)throw new TypeError("You must pass an event name.");if(i&&typeof i!="function")throw new TypeError("The callback must be a function.");var s=fe(this,"event:".concat(r),i);s&&this.callMethod("removeEventListener",r).catch(function(c){})}},{key:"loadVideo",value:function(r){return this.callMethod("loadVideo",r)}},{key:"ready",value:function(){var r=ve.get(this)||new F(function(i,s){s(new Error("Unknown player. Probably unloaded."))});return F.resolve(r)}},{key:"addCuePoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.callMethod("addCuePoint",{time:r,data:i})}},{key:"removeCuePoint",value:function(r){return this.callMethod("removeCuePoint",r)}},{key:"enableTextTrack",value:function(r,i){if(!r)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:r,kind:i})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return R.isEnabled?R.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return R.isEnabled?R.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return R.isEnabled?F.resolve(R.isFullscreen):this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"remotePlaybackPrompt",value:function(){return this.callMethod("remotePlaybackPrompt")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var r=this;return new F(function(i){if(ve.delete(r),U.delete(r.element),r._originalElement&&(U.delete(r._originalElement),r._originalElement.removeAttribute("data-vimeo-initialized")),r.element&&r.element.nodeName==="IFRAME"&&r.element.parentNode&&(r.element.parentNode.parentNode&&r._originalElement&&r._originalElement!==r.element.parentNode?r.element.parentNode.parentNode.removeChild(r.element.parentNode):r.element.parentNode.removeChild(r.element)),r.element&&r.element.nodeName==="DIV"&&r.element.parentNode){r.element.removeAttribute("data-vimeo-initialized");var s=r.element.querySelector("iframe");s&&s.parentNode&&(s.parentNode.parentNode&&r._originalElement&&r._originalElement!==s.parentNode?s.parentNode.parentNode.removeChild(s.parentNode):s.parentNode.removeChild(s))}r._window.removeEventListener("message",r._onMessage),R.isEnabled&&R.off("fullscreenchange",r.fullscreenchangeHandler),i()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(r){return this.set("autopause",r)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(r){return this.set("cameraProps",r)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"getColors",value:function(){return F.all([this.get("colorOne"),this.get("colorTwo"),this.get("colorThree"),this.get("colorFour")])}},{key:"setColor",value:function(r){return this.set("color",r)}},{key:"setColors",value:function(r){if(!Array.isArray(r))return new F(function(c,d){return d(new TypeError("Argument must be an array."))});var i=new F(function(c){return c(null)}),s=[r[0]?this.set("colorOne",r[0]):i,r[1]?this.set("colorTwo",r[1]):i,r[2]?this.set("colorThree",r[2]):i,r[3]?this.set("colorFour",r[3]):i];return F.all(s)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(r){return this.set("currentTime",r)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(r){return this.set("loop",r)}},{key:"setMuted",value:function(r){return this.set("muted",r)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(r){return this.set("playbackRate",r)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(r){return this.set("quality",r)}},{key:"getRemotePlaybackAvailability",value:function(){return this.get("remotePlaybackAvailability")}},{key:"getRemotePlaybackState",value:function(){return this.get("remotePlaybackState")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(r){return this.set("volume",r)}},{key:"setTimingSrc",value:function(){var t=z(X().mark(function i(s,c){var d=this,h;return X().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s){u.next=2;break}throw new TypeError("A Timing Object must be provided.");case 2:return u.next=4,this.ready();case 4:return h=new pt(this,s,c),q(this,"notifyTimingObjectConnect"),h.addEventListener("disconnect",function(){return q(d,"notifyTimingObjectDisconnect")}),u.abrupt("return",h);case 8:case"end":return u.stop()}},i,this)}));function r(i,s){return t.apply(this,arguments)}return r}()}]),o}();De||(R=ft(),lt(),ct(),ut(),dt());const mt={},gt=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"})),Ce=$e(gt);var he={},vt={get exports(){return he},set exports(o){he=o}},pe={},yt={get exports(){return pe},set exports(o){pe=o}},te=1e3,ne=te*60,oe=ne*60,re=oe*24,wt=re*365.25,Ct=function(o,t){t=t||{};var r=typeof o;if(r==="string"&&o.length>0)return bt(o);if(r==="number"&&isNaN(o)===!1)return t.long?Et(o):Ot(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))};function bt(o){if(o=String(o),!(o.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(o);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*wt;case"days":case"day":case"d":return r*re;case"hours":case"hour":case"hrs":case"hr":case"h":return r*oe;case"minutes":case"minute":case"mins":case"min":case"m":return r*ne;case"seconds":case"second":case"secs":case"sec":case"s":return r*te;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Ot(o){return o>=re?Math.round(o/re)+"d":o>=oe?Math.round(o/oe)+"h":o>=ne?Math.round(o/ne)+"m":o>=te?Math.round(o/te)+"s":o+"ms"}function Et(o){return ae(o,re,"day")||ae(o,oe,"hour")||ae(o,ne,"minute")||ae(o,te,"second")||o+" ms"}function ae(o,t,r){if(!(o<t))return o<t*1.5?Math.floor(o/t)+" "+r:Math.ceil(o/t)+" "+r+"s"}(function(o,t){t=o.exports=s.debug=s.default=s,t.coerce=y,t.disable=d,t.enable=c,t.enabled=h,t.humanize=Ct,t.names=[],t.skips=[],t.formatters={};var r;function i(u){var S=0,N;for(N in u)S=(S<<5)-S+u.charCodeAt(N),S|=0;return t.colors[Math.abs(S)%t.colors.length]}function s(u){function S(){if(S.enabled){var N=S,O=+new Date,I=O-(r||O);N.diff=I,N.prev=r,N.curr=O,r=O;for(var k=new Array(arguments.length),E=0;E<k.length;E++)k[E]=arguments[E];k[0]=t.coerce(k[0]),typeof k[0]!="string"&&k.unshift("%O");var p=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,function(n,a){if(n==="%%")return n;p++;var l=t.formatters[a];if(typeof l=="function"){var f=k[p];n=l.call(N,f),k.splice(p,1),p--}return n}),t.formatArgs.call(N,k);var e=S.log||t.log||console.log.bind(console);e.apply(N,k)}}return S.namespace=u,S.enabled=t.enabled(u),S.useColors=t.useColors(),S.color=i(u),typeof t.init=="function"&&t.init(S),S}function c(u){t.save(u),t.names=[],t.skips=[];for(var S=(typeof u=="string"?u:"").split(/[\s,]+/),N=S.length,O=0;O<N;O++)S[O]&&(u=S[O].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function d(){t.enable("")}function h(u){var S,N;for(S=0,N=t.skips.length;S<N;S++)if(t.skips[S].test(u))return!1;for(S=0,N=t.names.length;S<N;S++)if(t.names[S].test(u))return!0;return!1}function y(u){return u instanceof Error?u.stack||u.message:u}})(yt,pe);(function(o,t){t=o.exports=pe,t.log=s,t.formatArgs=i,t.save=c,t.load=d,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:h(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(y){try{return JSON.stringify(y)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function i(y){var u=this.useColors;if(y[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+y[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var S="color: "+this.color;y.splice(1,0,S,"color: inherit");var N=0,O=0;y[0].replace(/%[a-zA-Z%]/g,function(I){I!=="%%"&&(N++,I==="%c"&&(O=N))}),y.splice(O,0,S)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(y){try{y==null?t.storage.removeItem("debug"):t.storage.debug=y}catch{}}function d(){var y;try{y=t.storage.debug}catch{}return!y&&typeof process<"u"&&"env"in process&&(y={}.DEBUG),y}t.enable(d());function h(){try{return window.localStorage}catch{}}})(vt,he);var G=Ce,j=he("stream-parser"),St=kt,Fe=-1,ue=0,Nt=1,He=2;function kt(o){var t=o&&typeof o._transform=="function",r=o&&typeof o._write=="function";if(!t&&!r)throw new Error("must pass a Writable or Transform stream in");j("extending Parser into stream"),o._bytes=Pt,o._skipBytes=It,t&&(o._passthrough=Tt),t?o._transform=Mt:o._write=Lt}function ie(o){j("initializing parser stream"),o._parserBytesLeft=0,o._parserBuffers=[],o._parserBuffered=0,o._parserState=Fe,o._parserCallback=null,typeof o.push=="function"&&(o._parserOutput=o.push.bind(o)),o._parserInit=!0}function Pt(o,t){G(!this._parserCallback,'there is already a "callback" set!'),G(isFinite(o)&&o>0,'can only buffer a finite number of bytes > 0, got "'+o+'"'),this._parserInit||ie(this),j("buffering %o bytes",o),this._parserBytesLeft=o,this._parserCallback=t,this._parserState=ue}function It(o,t){G(!this._parserCallback,'there is already a "callback" set!'),G(o>0,'can only skip > 0 bytes, got "'+o+'"'),this._parserInit||ie(this),j("skipping %o bytes",o),this._parserBytesLeft=o,this._parserCallback=t,this._parserState=Nt}function Tt(o,t){G(!this._parserCallback,'There is already a "callback" set!'),G(o>0,'can only pass through > 0 bytes, got "'+o+'"'),this._parserInit||ie(this),j("passing through %o bytes",o),this._parserBytesLeft=o,this._parserCallback=t,this._parserState=He}function Lt(o,t,r){this._parserInit||ie(this),j("write(%o bytes)",o.length),typeof t=="function"&&(r=t),We(this,o,null,r)}function Mt(o,t,r){this._parserInit||ie(this),j("transform(%o bytes)",o.length),typeof t!="function"&&(t=this._parserOutput),We(this,o,t,r)}function je(o,t,r,i){return o._parserBytesLeft<=0?i(new Error("got data but not currently parsing anything")):t.length<=o._parserBytesLeft?function(){return Pe(o,t,r,i)}:function(){var s=t.slice(0,o._parserBytesLeft);return Pe(o,s,r,function(c){if(c)return i(c);if(t.length>s.length)return function(){return je(o,t.slice(s.length),r,i)}})}}function Pe(o,t,r,i){if(o._parserBytesLeft-=t.length,j("%o bytes left for stream piece",o._parserBytesLeft),o._parserState===ue?(o._parserBuffers.push(t),o._parserBuffered+=t.length):o._parserState===He&&r(t),o._parserBytesLeft===0){var s=o._parserCallback;if(s&&o._parserState===ue&&o._parserBuffers.length>1&&(t=Buffer.concat(o._parserBuffers,o._parserBuffered)),o._parserState!==ue&&(t=null),o._parserCallback=null,o._parserBuffered=0,o._parserState=Fe,o._parserBuffers.splice(0),s){var c=[];t&&c.push(t),r&&c.push(r);var d=s.length>c.length;d&&c.push(qe(i));var h=s.apply(o,c);if(!d||i===h)return i}}else return i}var We=qe(je);function qe(o){return function(){for(var t=o.apply(this,arguments);typeof t=="function";)t=t();return t}}var At=St,Dt=Ce.inherits,me=Ce.Transform;me||(me=ze);var Yt=V;function V(o){if(!(this instanceof V))return new V(o);if(typeof o=="number"&&(o={bps:o}),o||(o={}),o.lowWaterMark==null&&(o.lowWaterMark=0),o.highWaterMark==null&&(o.highWaterMark=0),o.bps==null)throw new Error('must pass a "bps" bytes-per-second option');o.chunkSize==null&&(o.chunkSize=o.bps/10|0),me.call(this,o),this.bps=o.bps,this.chunkSize=Math.max(1,o.chunkSize),this.totalBytes=0,this.startTime=Date.now(),this._passthroughChunk()}Dt(V,me);At(V.prototype);V.prototype._passthroughChunk=function(){this._passthrough(this.chunkSize,this._onchunk),this.totalBytes+=this.chunkSize};V.prototype._onchunk=function(o,t){var r=this,i=(Date.now()-this.startTime)/1e3,s=i*this.bps;function c(){r._passthroughChunk(),t()}if(this.totalBytes>s){var d=this.totalBytes-s,h=d/this.bps*1e3;h>0?setTimeout(c,h):c()}else c()};export{Re as P,_t as S,Yt as t};
//# sourceMappingURL=vendor-813e702e.js.map
